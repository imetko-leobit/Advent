# Well Being Quest - Environment Configuration
# 
# This file contains all available environment variables for the application.
# Copy this file to .env.local and customize the values for your environment.
#
# IMPORTANT: All variables are OPTIONAL in development mode!
# The app works perfectly fine without any configuration for local development.

# ============================================================================
# DEVELOPMENT MODE
# ============================================================================

# Enable DEV mode (bypasses authentication and uses mock data)
# 
# Required: No (defaults to false)
# Values: true | false
# Default: false
#
# When VITE_DEV_MODE=true:
#   - Authentication is bypassed (auto-login as dev@leobit.com)
#   - Mock data is used from /public/mock-quest-data.csv
#   - Data polling is disabled
#   - No external services needed (OIDC, Google Sheets)
#   - Perfect for local development and demos
#
# When VITE_DEV_MODE=false or not set:
#   - Real OIDC authentication required
#   - Real data source required (Google Sheets)
#   - Standard production behavior
#
VITE_DEV_MODE=true

# ============================================================================
# AUTHENTICATION CONFIGURATION
# ============================================================================

# OIDC Authority URL
# The base URL of your OpenID Connect identity provider
# 
# Required: Only when VITE_DEV_MODE=false (production mode)
# Default (DEV): undefined (uses mock authentication)
# Example: https://auth.example.com
# Example: https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0
#
# When this is NOT set and VITE_DEV_MODE=true:
#   - Authentication is bypassed
#   - User is automatically logged in as "dev@leobit.com"
#   - No external auth provider needed
#
VITE_APP_AUTH_AUTHORITY=

# OAuth Redirect URI
# The URL where users are redirected after authentication
#
# Required: Only if VITE_APP_AUTH_AUTHORITY is set
# Default (DEV): undefined
# Local Dev Example: http://localhost:5173
# Production Example: https://your-domain.com
#
# Must match the redirect URI configured in your OIDC provider
#
VITE_APP_AUTH_REDIRECT_URI=

# ============================================================================
# DATA SOURCE CONFIGURATION
# ============================================================================

# Google Sheets CSV Export URL
# The URL to fetch quest participant data from Google Sheets
#
# Required: Only when VITE_DEV_MODE=false (production mode)
# Default (DEV): /mock-quest-data.csv (local mock data)
# Format: https://docs.google.com/spreadsheets/d/SHEET_ID/export?format=csv
#
# How to get this URL:
#   1. Open your Google Sheet
#   2. Click File > Share > Publish to web
#   3. Choose "Comma-separated values (.csv)" as format
#   4. Choose the specific sheet or entire document
#   5. Click "Publish" and copy the generated URL
#   6. Make sure the URL ends with /export?format=csv
#
# When this is NOT set and VITE_DEV_MODE=true:
#   - Uses local mock data from /public/mock-quest-data.csv
#   - Perfect for development and testing
#   - No internet connection needed
#
VITE_GOOGLE_SHEET_URL=

# ============================================================================
# CONFIGURATION EXAMPLES
# ============================================================================

# Example 1: DEV Mode (Local Development - Recommended)
# VITE_DEV_MODE=true
# (No other variables needed!)

# Example 2: DEV Mode with Custom Mock Data
# VITE_DEV_MODE=true
# (Edit /public/mock-quest-data.csv to customize test data)

# Example 3: Production Mode with Real Services
# VITE_DEV_MODE=false
# VITE_APP_AUTH_AUTHORITY=https://auth.example.com
# VITE_APP_AUTH_REDIRECT_URI=https://wellbeing.example.com
# VITE_GOOGLE_SHEET_URL=https://docs.google.com/spreadsheets/d/1ABC.../export?format=csv

# ============================================================================
# IMPORTANT NOTES
# ============================================================================

# 1. File Naming:
#    - Use ".env.local" for local development (this file is gitignored)
#    - Use ".env.production" for production builds
#    - Never commit .env.local or .env.production to git!

# 2. Variable Prefix:
#    - All variables MUST start with "VITE_" to be accessible in the app
#    - Vite only exposes variables with this prefix to your application

# 3. Restart Required:
#    - After changing .env.local, restart your dev server (npm run dev)
#    - Environment variables are only loaded on server start

# 4. DEV Mode Behavior:
#    When VITE_DEV_MODE=true:
#    ✓ Auth is bypassed (auto-login as dev@leobit.com)
#    ✓ Mock CSV data loaded from /public/mock-quest-data.csv
#    ✓ Data polling is disabled (no background refreshes)
#    ✓ All features work normally
#    ✓ No external dependencies needed

# 5. Production Mode:
#    When VITE_DEV_MODE=false or not set:
#    ✗ All variables should be properly configured
#    ✗ Real OIDC provider is required
#    ✗ Real data source is required

# 6. Configuration Validation:
#    - In DEV mode (VITE_DEV_MODE=true), no other variables are required
#    - In production mode, VITE_APP_AUTH_AUTHORITY and VITE_APP_AUTH_REDIRECT_URI must both be set
#    - In production mode, VITE_GOOGLE_SHEET_URL should be set
#    - The app validates this on startup and shows a clear error if misconfigured

# ============================================================================
# TROUBLESHOOTING
# ============================================================================

# Issue: "No authority or metadataUrl configured" error
# Solution: Set VITE_DEV_MODE=true to use DEV mode, or configure both OIDC variables for production mode

# Issue: Environment variables not working
# Solution: 
#   1. Check file name is exactly ".env.local"
#   2. Verify variables start with "VITE_"
#   3. Restart dev server (npm run dev)

# Issue: Redirect loop after login
# Solution:
#   1. Clear browser localStorage and sessionStorage
#   2. Verify both OIDC variables are set correctly
#   3. Check redirect URI matches your OIDC provider configuration

# Issue: No data showing on map
# Solution:
#   1. Check /public/mock-quest-data.csv exists (for DEV mode)
#   2. Verify Google Sheets URL ends with /export?format=csv
#   3. Make sure Google Sheet is publicly accessible
#   4. Check browser console for fetch errors

# ============================================================================
# For more information, see:
# - Main README: /README.md
# - Authentication docs: /docs/AUTHENTICATION.md
# - Data service docs: /docs/QUEST_DATA_SERVICE.md
# ============================================================================
