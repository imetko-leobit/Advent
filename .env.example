# Well Being Quest - Environment Configuration
# 
# This file contains all available environment variables for the application.
# Copy this file to .env.local and customize the values for your environment.
#
# IMPORTANT: All variables are OPTIONAL in development mode!
# The app works perfectly fine without any configuration for local development.

# ============================================================================
# AUTHENTICATION CONFIGURATION
# ============================================================================

# OIDC Authority URL
# The base URL of your OpenID Connect identity provider
# 
# Required: Only in production or when you want real authentication in dev
# Default (DEV): undefined (uses mock authentication)
# Example: https://auth.example.com
# Example: https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0
#
# When this is NOT set in DEV mode:
#   - Authentication is bypassed
#   - User is automatically logged in as "dev@leobit.com"
#   - No external auth provider needed
#
VITE_APP_AUTH_AUTHORITY=

# OAuth Redirect URI
# The URL where users are redirected after authentication
#
# Required: Only if VITE_APP_AUTH_AUTHORITY is set
# Default (DEV): undefined
# Local Dev Example: http://localhost:5173
# Production Example: https://your-domain.com
#
# Must match the redirect URI configured in your OIDC provider
#
VITE_APP_AUTH_REDIRECT_URI=

# ============================================================================
# DATA SOURCE CONFIGURATION
# ============================================================================

# Google Sheets CSV Export URL
# The URL to fetch quest participant data from Google Sheets
#
# Required: Only in production
# Default (DEV): /mock-quest-data.csv (local mock data)
# Format: https://docs.google.com/spreadsheets/d/SHEET_ID/export?format=csv
#
# How to get this URL:
#   1. Open your Google Sheet
#   2. Click File > Share > Publish to web
#   3. Choose "Comma-separated values (.csv)" as format
#   4. Choose the specific sheet or entire document
#   5. Click "Publish" and copy the generated URL
#   6. Make sure the URL ends with /export?format=csv
#
# When this is NOT set in DEV mode:
#   - Uses local mock data from /public/mock-quest-data.csv
#   - Perfect for development and testing
#   - No internet connection needed
#
VITE_GOOGLE_SHEET_URL=

# ============================================================================
# CONFIGURATION EXAMPLES
# ============================================================================

# Example 1: Minimal Setup (Local Development)
# Just run `npm run dev` - no .env.local file needed!
# Everything works with mock data and mock authentication.

# Example 2: Local Dev with Real Authentication (Testing Auth Flow)
# VITE_APP_AUTH_AUTHORITY=https://dev.auth.example.com
# VITE_APP_AUTH_REDIRECT_URI=http://localhost:5173
# VITE_GOOGLE_SHEET_URL=
# (leaves Google Sheets empty to use mock data)

# Example 3: Full Production Configuration
# VITE_APP_AUTH_AUTHORITY=https://auth.example.com
# VITE_APP_AUTH_REDIRECT_URI=https://wellbeing.example.com
# VITE_GOOGLE_SHEET_URL=https://docs.google.com/spreadsheets/d/1ABC.../export?format=csv

# ============================================================================
# IMPORTANT NOTES
# ============================================================================

# 1. File Naming:
#    - Use ".env.local" for local development (this file is gitignored)
#    - Use ".env.production" for production builds
#    - Never commit .env.local or .env.production to git!

# 2. Variable Prefix:
#    - All variables MUST start with "VITE_" to be accessible in the app
#    - Vite only exposes variables with this prefix to your application

# 3. Restart Required:
#    - After changing .env.local, restart your dev server (npm run dev)
#    - Environment variables are only loaded on server start

# 4. DEV Mode Behavior:
#    When running `npm run dev` without environment variables:
#    ✓ Auth is bypassed (auto-login as dev@leobit.com)
#    ✓ Mock CSV data loaded from /public/mock-quest-data.csv
#    ✓ All features work normally
#    ✓ No external dependencies needed

# 5. Production Builds:
#    When running `npm run build`:
#    ✗ All variables should be properly configured
#    ✗ Mock authentication is not available
#    ✗ Real OIDC provider is required

# 6. Configuration Validation:
#    - If you set VITE_APP_AUTH_AUTHORITY, you MUST also set VITE_APP_AUTH_REDIRECT_URI
#    - The app validates this on startup and shows a clear error if misconfigured
#    - To fix: either set both variables or remove both to use DEV mode

# ============================================================================
# TROUBLESHOOTING
# ============================================================================

# Issue: "No authority or metadataUrl configured" error
# Solution: Either set both OIDC variables or remove both to use DEV mode

# Issue: Environment variables not working
# Solution: 
#   1. Check file name is exactly ".env.local"
#   2. Verify variables start with "VITE_"
#   3. Restart dev server (npm run dev)

# Issue: Redirect loop after login
# Solution:
#   1. Clear browser localStorage and sessionStorage
#   2. Verify both OIDC variables are set correctly
#   3. Check redirect URI matches your OIDC provider configuration

# Issue: No data showing on map
# Solution:
#   1. Check /public/mock-quest-data.csv exists (for DEV mode)
#   2. Verify Google Sheets URL ends with /export?format=csv
#   3. Make sure Google Sheet is publicly accessible
#   4. Check browser console for fetch errors

# ============================================================================
# For more information, see:
# - Main README: /README.md
# - Authentication docs: /docs/AUTHENTICATION.md
# - Data service docs: /docs/QUEST_DATA_SERVICE.md
# ============================================================================
